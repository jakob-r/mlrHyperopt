<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Working with ParConfigs and ParamSets • mlrHyperopt</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mlrHyperopt</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mlrHyperopt.html">
    <span class="fa fa-bolt"></span>
     
    Introduction
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-file-text-o"></span>
     
    Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/working_with_parconfigs_and_paramsets.html">Working with ParConfigs and ParamSets</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="http://mlrhyperopt.jakob-r.de/parconfigs">
    <span class="fa fa-cubes"></span>
     
    ParConfigs
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jakob-r/mlrHyperopt">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Working with ParConfigs and ParamSets</h1>
                        <h4 class="author">Jakob Richter</h4>
            
          </div>

    
    
<div class="contents">
<p>This Vignette is covers the <code>ParConfig</code> objects, what they contain and how they are created.</p>
<div id="components-of-a-parconfig" class="section level2">
<h2 class="hasAnchor">
<a href="#components-of-a-parconfig" class="anchor"></a>Components of a <code>ParConfig</code>
</h2>
<p>First we will create a <code>ParConfig</code> so we can have a look at what we need.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeIntegerParam</span>(<span class="st">"k"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">20</span>)
)
pc =<span class="st"> </span><span class="kw"><a href="../reference/makeParConfig.html">makeParConfig</a></span>(
  <span class="dt">learner =</span> <span class="st">"classif.knn"</span>,
  <span class="dt">par.set =</span> ps
)
<span class="kw">str</span>(pc, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 6
##  $ par.set                 :List of 2
##   ..- attr(*, "class")= chr "ParamSet"
##  $ par.vals                : NULL
##  $ associated.learner.class: chr "classif.knn"
##  $ associated.learner.type : chr "classif"
##  $ associated.learner.name : chr "knn"
##  $ note                    : chr ""
##  - attr(*, "class")= chr "ParConfig"</code></pre>
<p>Now we already saw a minimal way to create a <code>ParConfig</code> out of a <code>ParamSet</code> and the according <code>learner</code>. Instead of the string <code>"classif.knn"</code> you can also directly pass the <code>mlr</code> learner object. We see that <code>par.vals</code> and <code>note</code> is not used.</p>
<ul>
<li>
<code>par.vals</code> is to store fixed parameter settings that we want to use to override the defaults of the <code>learner</code>.</li>
<li>
<code>note</code> is just for leaving a comment that will eventually be visible online once you decide to upload your <code>ParConfig</code>.</li>
</ul>
<div id="access-the-components-of-a-parconfig" class="section level3">
<h3 class="hasAnchor">
<a href="#access-the-components-of-a-parconfig" class="anchor"></a>Access the components of a <code>ParConfig</code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigParSet.html">getParConfigParSet</a></span>(pc)</code></pre></div>
<pre><code>##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigParVals.html">getParConfigParVals</a></span>(pc)</code></pre></div>
<pre><code>## NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigLearnerClass.html">getParConfigLearnerClass</a></span>(pc)</code></pre></div>
<pre><code>## [1] "classif.knn"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigLearnerName.html">getParConfigLearnerName</a></span>(pc)</code></pre></div>
<pre><code>## [1] "knn"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigLearnerType.html">getParConfigLearnerType</a></span>(pc)</code></pre></div>
<pre><code>## [1] "classif"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getParConfigNote.html">getParConfigNote</a></span>(pc)</code></pre></div>
<pre><code>## [1] ""</code></pre>
</div>
<div id="modify-the-components-of-a-parconfig" class="section level3">
<h3 class="hasAnchor">
<a href="#modify-the-components-of-a-parconfig" class="anchor"></a>Modify the components of a <code>ParConfig</code>
</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(<span class="dt">pc.reg =</span> <span class="kw"><a href="../reference/setParConfigLearner.html">setParConfigLearner</a></span>(pc, <span class="st">"regr.kknn"</span>))</code></pre></div>
<pre><code>## Loading required package: kknn</code></pre>
<pre><code>## Parameter Configuration
##   Associated Learner: regr.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/setParConfigLearnerType.html">setParConfigLearnerType</a></span>(pc.reg, <span class="st">"classif"</span>)</code></pre></div>
<pre><code>## Parameter Configuration
##   Associated Learner: classif.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/setParConfigNote.html">setParConfigNote</a></span>(pc.reg, <span class="st">"A note..."</span>)</code></pre></div>
<pre><code>## Parameter Configuration
##   Associated Learner: regr.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/setParConfigParVals.html">setParConfigParVals</a></span>(pc.reg, <span class="kw">list</span>(<span class="dt">scale =</span> <span class="ot">FALSE</span>))</code></pre></div>
<pre><code>## Parameter Configuration
##   Parameter Values: scale=FALSE
##   Associated Learner: regr.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/setParConfigParSet.html">setParConfigParSet</a></span>(pc.reg, <span class="kw">makeParamSet</span>(<span class="kw">makeIntegerParam</span>(<span class="st">"k"</span>, <span class="dv">3</span>, <span class="dv">11</span>)))</code></pre></div>
<pre><code>## Parameter Configuration
##   Associated Learner: regr.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 3 to 11   -    TRUE     -</code></pre>
</div>
</div>
<div id="create-a-parconfig" class="section level2">
<h2 class="hasAnchor">
<a href="#create-a-parconfig" class="anchor"></a>Create a <code>ParConfig</code>
</h2>
<p>We already saw how to minimally create a <code>ParConfig</code> in the first example. Let’s look at more examples:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrn =<span class="st"> </span><span class="kw">makeLearner</span>(<span class="st">"regr.kknn"</span>)
<span class="kw"><a href="../reference/makeParConfig.html">makeParConfig</a></span>(
  <span class="dt">par.set =</span> ps,
  <span class="dt">learner =</span> lrn,
  <span class="dt">par.vals =</span> <span class="kw">list</span>(<span class="dt">kernel =</span> <span class="st">"gaussian"</span>),
  <span class="dt">note =</span> <span class="st">"This is just an example with the kernel set to 'Gaussian'."</span>
)</code></pre></div>
<pre><code>## Parameter Configuration
##   Parameter Values: kernel=gaussian
##   Associated Learner: regr.kknn
##   Parameter Set:
##      Type len Def  Constr Req Tunable Trafo
## k integer   -   - 1 to 20   -    TRUE     -</code></pre>
<div id="create-a-parconfig-without-a-specific-learner" class="section level3">
<h3 class="hasAnchor">
<a href="#create-a-parconfig-without-a-specific-learner" class="anchor"></a>Create a <code>ParConfig</code> without a specific learner</h3>
<p><code>mlr</code> differentiates learners pretty strictly from their type (e.g. <em>classification</em>, <em>regression</em>, <em>cluster</em> etc.) although sometimes they share the same <em>R</em> function in the underlying package. If we want to allow the <code>ParConfig</code> to serve for <code>classif.knn</code> as well as <code>regr.knn</code> we have to construct it less strict like the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc.less =<span class="st"> </span><span class="kw"><a href="../reference/makeParConfig.html">makeParConfig</a></span>(
  <span class="dt">learner.name =</span> <span class="st">"knn"</span>,
  <span class="dt">par.set =</span> ps
)
<span class="kw">str</span>(pc.less, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 6
##  $ par.set                 :List of 2
##   ..- attr(*, "class")= chr "ParamSet"
##  $ par.vals                : NULL
##  $ associated.learner.class: NULL
##  $ associated.learner.type : NULL
##  $ associated.learner.name : chr "knn"
##  $ note                    : chr ""
##  - attr(*, "class")= chr "ParConfig"</code></pre>
<p>Or if you are unsure about the learner name but have the <code>mlr</code> learner object:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrn =<span class="st"> </span><span class="kw">makeLearner</span>(<span class="st">"classif.knn"</span>)
pc.less =<span class="st"> </span><span class="kw"><a href="../reference/makeParConfig.html">makeParConfig</a></span>(
  <span class="dt">learner.name =</span> <span class="kw"><a href="../reference/getLearnerName.html">getLearnerName</a></span>(lrn),
  <span class="dt">par.set =</span> ps
)
<span class="kw">str</span>(pc.less, <span class="dv">1</span>)</code></pre></div>
<pre><code>## List of 6
##  $ par.set                 :List of 2
##   ..- attr(*, "class")= chr "ParamSet"
##  $ par.vals                : NULL
##  $ associated.learner.class: NULL
##  $ associated.learner.type : NULL
##  $ associated.learner.name : chr "knn"
##  $ note                    : chr ""
##  - attr(*, "class")= chr "ParConfig"</code></pre>
<p><em>Note:</em> The function <code>generateParConfig</code> will return a <code>ParConfig</code> for a given learner with a default tuning <code>ParamSet</code>.</p>
</div>
</div>
<div id="the-basics-of-a-paramset" class="section level2">
<h2 class="hasAnchor">
<a href="#the-basics-of-a-paramset" class="anchor"></a>The Basics of a <code>ParamSet</code>
</h2>
<p>Most of the power of a <code>ParConfig</code> lies it in the <code>ParamSet</code> which is part of the <a href="https://github.com/berndbischl/ParamHelpers">ParamHelpers</a> package. The most important features will be explained in the following.</p>
<div id="creating-a-paramset" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-paramset" class="anchor"></a>Creating a <code>ParamSet</code>
</h3>
<p>If we want to create a <code>ParamSet</code> for a specific <code>mlr</code> learner it is always helpful to check which parameters are available.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lrn =<span class="st"> </span><span class="kw">makeLearner</span>(<span class="st">"classif.ksvm"</span>)
<span class="kw">getParamSet</span>(lrn)</code></pre></div>
<pre><code>##                        Type  len    Def
## scaled              logical    -   TRUE
## type               discrete    -  C-svc
## kernel             discrete    - rbfdot
## C                   numeric    -      1
## nu                  numeric    -    0.2
## epsilon             numeric    -    0.1
## sigma               numeric    -      -
## degree              integer    -      3
## scale               numeric    -      1
## offset              numeric    -      1
## order               integer    -      1
## tol                 numeric    -  0.001
## shrinking           logical    -   TRUE
## class.weights numericvector &lt;NA&gt;      -
## fit                 logical    -   TRUE
## cache               integer    -     40
##                                                 Constr Req Tunable Trafo
## scaled                                               -   -    TRUE     -
## type              C-svc,nu-svc,C-bsvc,spoc-svc,kbb-svc   -    TRUE     -
## kernel        vanilladot,polydot,rbfdot,tanhdot,lap...   -    TRUE     -
## C                                             0 to Inf   Y    TRUE     -
## nu                                            0 to Inf   Y    TRUE     -
## epsilon                                    -Inf to Inf   Y    TRUE     -
## sigma                                         0 to Inf   Y    TRUE     -
## degree                                        1 to Inf   Y    TRUE     -
## scale                                         0 to Inf   Y    TRUE     -
## offset                                     -Inf to Inf   Y    TRUE     -
## order                                      -Inf to Inf   Y    TRUE     -
## tol                                           0 to Inf   -    TRUE     -
## shrinking                                            -   -    TRUE     -
## class.weights                                 0 to Inf   -    TRUE     -
## fit                                                  -   -   FALSE     -
## cache                                         1 to Inf   -    TRUE     -</code></pre>
<p>As we now these parameters are not tunable because they don’t have finite box constraints and it’s also hard because there are so many. That’s why we have to build our own. The function <code>makeParamSet</code> will take all our single parameters to create a <code>ParamSet</code>. Parameters of all different kinds can be created with the <code>make*Param</code> functions. To name the most important ones</p>
<ul>
<li><code>makeNumericParam(id, lower, upper)</code></li>
<li><code>makeIntegerParam(id, lower, upper)</code></li>
<li><code>makeLogicParam(id)</code></li>
<li><code>makeDiscreteParam(id, values)</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps.svm =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeNumericParam</span>(<span class="st">"C"</span>, <span class="dt">lower =</span> <span class="dv">0</span>, <span class="dt">upper =</span> <span class="dv">100</span>),
  <span class="kw">makeDiscreteParam</span>(<span class="st">"kernel"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"polydot"</span>,<span class="st">"rbfdot"</span>))
)</code></pre></div>
<p><em>Attention!</em> Here we see the first problem: The parameter <em>C</em> is more sensitive to small changes for values around zero. To take that into account we will use the <code>trafo</code> argument.</p>
</div>
<div id="creating-a-paramset-with-a-transformation" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-paramset-with-a-transformation" class="anchor"></a>Creating a <code>ParamSet</code> with a transformation</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps.svm.trafo =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeNumericParam</span>(<span class="st">"C"</span>, <span class="dt">lower =</span> -<span class="dv">5</span>, <span class="dt">upper =</span> <span class="dv">7</span>, <span class="dt">trafo =</span> function(x) <span class="dv">2</span>^x),
  <span class="kw">makeDiscreteParam</span>(<span class="st">"kernel"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"polydot"</span>,<span class="st">"rbfdot"</span>))
)</code></pre></div>
<p>Let’s compare randomly drawn values:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s1 =<span class="st"> </span><span class="kw">sampleValues</span>(ps.svm, <span class="dt">n =</span> <span class="dv">100</span>)
s2 =<span class="st"> </span><span class="kw">sampleValues</span>(ps.svm.trafo, <span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">trafo =</span> <span class="ot">TRUE</span>)
op =<span class="st"> </span><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))
<span class="kw">hist</span>(BBmisc::<span class="kw">extractSubList</span>(s1, <span class="st">"C"</span>))
<span class="kw">hist</span>(BBmisc::<span class="kw">extractSubList</span>(s2, <span class="st">"C"</span>))</code></pre></div>
<p><img src="working_with_parconfigs_and_paramsets_files/figure-html/ps_trafo_comparison-1.png" width="672"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(op)</code></pre></div>
<p>As transformations can be arbitrary functions they can be used for other useful purposes as only generating uneven numbers, which makes sense for <code>knn</code> classification to not have ties:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps.knn =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeNumericParam</span>(<span class="st">"k"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">6</span>, <span class="dt">trafo =</span> function(x) <span class="dv">2</span>*x<span class="dv">-1</span>)
)</code></pre></div>
</div>
<div id="creating-a-paramset-with-dependent-hierarchical-parameters" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-paramset-with-dependent-hierarchical-parameters" class="anchor"></a>Creating a <code>ParamSet</code> with dependent / hierarchical parameters</h3>
<p>For our SVM example we actually would like to tune the parameter <em>sigma</em> for the <code>rbfdot</code> kernel and the <em>degree</em> for the <code>polydot</code> kernel. So the <em>sigma</em> parameter should only be active when <em>kernel</em> is set to <code>rbfdot</code> and <em>degree</em> should only be active for <code>kernel == "polydot"</code>. To model such dependencies or hierarchical structures in the parameter space all <code>make*Param</code> functions have the <code>requires</code> argument which can be used like follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps.svm.req =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeNumericParam</span>(<span class="st">"C"</span>, <span class="dt">lower =</span> -<span class="dv">5</span>, <span class="dt">upper =</span> <span class="dv">7</span>, <span class="dt">trafo =</span> function(x) <span class="dv">2</span>^x),
  <span class="kw">makeDiscreteParam</span>(<span class="st">"kernel"</span>, <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">"polydot"</span>,<span class="st">"rbfdot"</span>)),
  <span class="kw">makeNumericParam</span>(<span class="st">"sigma"</span>, <span class="dt">lower =</span> -<span class="dv">5</span>, <span class="dt">upper =</span> <span class="dv">5</span>, <span class="dt">trafo =</span> function(x) <span class="dv">2</span>^x, <span class="dt">requires =</span> <span class="kw">quote</span>(kernel ==<span class="st"> "rbfdot"</span>)),
  <span class="kw">makeIntegerParam</span>(<span class="st">"degree"</span>, <span class="dt">lower =</span> <span class="dv">1</span>, <span class="dt">upper =</span> <span class="dv">5</span>, <span class="dt">requires =</span> <span class="kw">quote</span>(kernel ==<span class="st"> "polydot"</span>))
)</code></pre></div>
<p>Let’s generate a LHS design to see the effects of the requirements:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">generateDesign</span>(<span class="dv">6</span>, ps.svm.req)</code></pre></div>
<pre><code>##            C  kernel     sigma degree
## 1 -1.2177714 polydot        NA      2
## 2  4.2525139  rbfdot -4.188279     NA
## 3  5.6058098 polydot        NA      1
## 4  1.7764093  rbfdot  3.601943     NA
## 5 -0.6790498 polydot        NA      4
## 6 -3.2748962  rbfdot  2.639787     NA</code></pre>
</div>
<div id="creating-a-paramset-with-data-dependent-parameter-spaces" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-paramset-with-data-dependent-parameter-spaces" class="anchor"></a>Creating a <code>ParamSet</code> with data dependent parameter spaces</h3>
<p>For some learners the tuning space varies from the data presented. A prominent example is the <em>mtry</em> parameter of the <code>randomForest</code> which determines how many randomly drawn variables are to be considered in every split. The default is <code>sqrt(p)</code> with <code>p</code> being the number of variables in the data. Naturally we might want to set the boundaries for that value around that default. This is possible using expressions like in the following example:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ps.rf =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeIntegerParam</span>(<span class="st">"mtry"</span>, <span class="dt">lower =</span> <span class="kw">expression</span>(<span class="kw">floor</span>(<span class="kw">sqrt</span>(p*<span class="fl">0.25</span>))), <span class="dt">upper =</span> <span class="kw">expression</span>(<span class="kw">ceiling</span>(<span class="kw">sqrt</span>(p*<span class="fl">0.75</span>))))
)</code></pre></div>
<p>Which variables can I use in the expressions?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/getTaskDictionary.html">getTaskDictionary</a></span>(<span class="dt">task =</span> iris.task)</code></pre></div>
<pre><code>## $task
## Supervised task: iris-example
## Type: classif
## Target: Species
## Observations: 150
## Features:
## numerics  factors  ordered 
##        4        0        0 
## Missings: FALSE
## Has weights: FALSE
## Has blocking: FALSE
## Classes: 3
##     setosa versicolor  virginica 
##         50         50         50 
## Positive class: NA
## 
## $p
## [1] 4
## 
## $n.task
## [1] 150
## 
## $type
## [1] "classif"
## 
## $n
## [1] 150
## 
## $k
## [1] 3</code></pre>
<ul>
<li>
<code>p</code> number of features / variables in <em>x</em>
</li>
<li>
<code>n.task</code> number of observations in the task</li>
<li>
<code>type</code> type of the task like <code>classif</code>, <code>regr</code>, <code>cluster</code> and <code>surv</code>.</li>
<li>
<code>n</code> number of observations in the subset</li>
<li>
<code>k</code> number of classes in target</li>
<li>
<code>task</code> the complete task object</li>
</ul>
<p><em>Attention:</em> This feature is not implemented in mlr yet. As a consequence the expressions have to be pre-evaluated before they can be used for tuning. This also means that a smaller value for <code>n</code> in each cross-validation split will not be used as well as a feature selection won’t affect <code>p</code>.</p>
<p>To convert the <code>ParamSet</code> with expressions to a normal <code>ParamSet</code> we call the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluateParamExpressions</span>(ps.rf, <span class="dt">dict =</span> <span class="kw"><a href="../reference/getTaskDictionary.html">getTaskDictionary</a></span>(iris.task))</code></pre></div>
<pre><code>##         Type len Def Constr Req Tunable Trafo
## mtry integer   -   - 1 to 2   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">evaluateParamExpressions</span>(ps.rf, <span class="dt">dict =</span> <span class="kw">list</span>(<span class="dt">p =</span> <span class="dv">100</span>, <span class="dt">n =</span> <span class="dv">1000</span>))</code></pre></div>
<pre><code>##         Type len Def Constr Req Tunable Trafo
## mtry integer   -   - 5 to 9   -    TRUE     -</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#components-of-a-parconfig">Components of a <code>ParConfig</code></a></li>
      <li><a href="#create-a-parconfig">Create a <code>ParConfig</code></a></li>
      <li><a href="#the-basics-of-a-paramset">The Basics of a <code>ParamSet</code></a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Richter Jakob.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
