<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mlrHyperopt • mlrHyperopt</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">mlrHyperopt</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/mlrHyperopt.html">
    <span class="fa fa-bolt"></span>
     
    Introduction
  </a>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-book"></span>
     
    Reference
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/jakob-r/mlrHyperopt">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>mlrHyperopt</h1>
                        <h4 class="author">Jakob Richter</h4>
            
          </div>

    
    
<div class="contents">
<p>This Vignette is supposed to give you a short introduction and a glance at the key features of <code>mlrHyperopt</code>. For updated information make sure to check the GitHub project page:</p>
<ul>
<li><a href="https://github.com/jakob-r/mlrHyperopt/">Project Page</a></li>
<li>Online documentation of <a href="https://jakob-r.github.io/mlrHyperopt/">mlrMBO</a>
</li>
<li>
<a href="http://mlrhyper.jakob-r.de/status.php">Status</a> of the online database.</li>
</ul>
<div id="purpose" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#purpose" class="anchor"> </a></body></html>Purpose</h2>
<p>The main goal of <code>mlrHyperopt</code> is to break boundaries and make Hyperparameter optimization super easy. Often beginners of machine learning and even experts don’t know which parameters have to be tuned for certain machine learning methods. Sometimes experts also don’t necessarily agree on the tuning parameters and their ranges. This package tries to tackle these problems by offering:</p>
<ul>
<li>Recommended parameter space configurations for the most common learners.</li>
<li>A fully automatic, <em>zero conf</em>, one line hyper parameter configuration.</li>
<li>Option to <strong>upload</strong> a good parameter space configuration for a specific learner to share with colleagues and researchers.</li>
<li>Possibility to <strong>download</strong> publicly available parameter space configurations for the machine learning method of your choice.</li>
<li>An extensible interface to use the full variety of <a href="http://mlr-org.github.com/mlr">mlr</a> of learners and tuning options.</li>
<li>Namely: <em>grid search</em>, <em>cma-es</em>, <em><a href="http://mlr-org.github.com/mlr/mlrMBO">model-based optimization</a></em> and <em>random search</em>.</li>
</ul>
</div>
<div id="requirements" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#requirements" class="anchor"> </a></body></html>Requirements</h2>
<p>As the name indicates <code>mlrHyperopt</code> relies heavily on <code>mlr</code>. Additionally <code>mlrMBO</code> will be used automatically for pure numeric Parameter Spaces of dimension 2 or higher. Most used objects are documented in <code>mlr</code>. To create your own <code>task</code> check the mlr-tutorial on how to create <a href="http://mlr-org.github.io/mlr-tutorial/release/html/task/index.html">Learning Tasks</a>, <a href="http://mlr-org.github.io/mlr-tutorial/release/html/learner/index.html">Learners</a>, <a href="http://mlr-org.github.io/mlr-tutorial/release/html/tune/index.html">Tuning Parameter Sets for Learners</a>, as well as <a href="http://mlr-org.github.io/mlr-tutorial/release/html/resample/index.html">custom resampling strategies</a>.</p>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#getting-started" class="anchor"> </a></body></html>Getting started</h2>
<p>Hyperparameter Tuning with <code>mlrHyperopt</code> can be done in one line:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(mlrHyperopt)
res =<span class="st"> </span><span class="kw"><a href="../reference/hyperopt.html">hyperopt</a></span>(iris.task, <span class="dt">learner =</span> <span class="st">"classif.randomForest"</span>)
res</code></pre></div>
<pre><code>## Tune result:
## Op. pars: ntree=160; nodesize=6
## mmce.test.mean=0.0467</code></pre>
<p>To obtain full control of what is happening you can define every argument yourself or just depend partially on the automatic processes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pc =<span class="st"> </span><span class="kw"><a href="../reference/generateParConfig.html">generateParConfig</a></span>(<span class="dt">learner =</span> <span class="st">"classif.randomForest"</span>)
<span class="co"># The tuning parameter set:</span>
<span class="kw"><a href="../reference/getParConfigParSet.html">getParConfigParSet</a></span>(pc)</code></pre></div>
<pre><code>##             Type len Def  Constr Req Tunable Trafo
## ntree    integer   -   -  0 to 7   -    TRUE     Y
## nodesize integer   -   - 1 to 10   -    TRUE     -</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Setting constant values:</span>
pc =<span class="st"> </span><span class="kw"><a href="../reference/setParConfigParVals.html">setParConfigParVals</a></span>(pc, <span class="dt">par.vals =</span> <span class="kw">list</span>(<span class="dt">mtry =</span> <span class="dv">3</span>))
hc =<span class="st"> </span><span class="kw"><a href="../reference/generateHyperControl.html">generateHyperControl</a></span>(<span class="dt">task =</span> iris.task, <span class="dt">par.config =</span> pc)
<span class="co"># Inspecting the resamling strategy used for tuning</span>
<span class="kw"><a href="../reference/getHyperControlResampling.html">getHyperControlResampling</a></span>(hc)</code></pre></div>
<pre><code>## Resample description: cross-validation with 10 iterations.
## Predict: test
## Stratification: FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Changing the resampling strategy</span>
hc =<span class="st"> </span><span class="kw"><a href="../reference/setHyperControlResampling.html">setHyperControlResampling</a></span>(hc, <span class="kw">makeResampleDesc</span>(<span class="st">"Bootstrap"</span>, <span class="dt">iters =</span> <span class="dv">3</span>))

<span class="co"># Starting the hyperparameter tuning</span>
res =<span class="st"> </span><span class="kw"><a href="../reference/hyperopt.html">hyperopt</a></span>(iris.task, <span class="dt">par.config =</span> pc, <span class="dt">hyper.control =</span> hc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)
res</code></pre></div>
<pre><code>## Tune result:
## Op. pars: ntree=320; nodesize=10
## mmce.test.mean=0.0324</code></pre>
</div>
<div id="sharing-search-spaces" class="section level2">
<h2 class="hasAnchor">
<html><body><a href="#sharing-search-spaces" class="anchor"> </a></body></html>Sharing Search Spaces</h2>
<p>The predefined parameter search spaces in this package do not cover all <em>learners</em> available in <a href="https://github.com/mlr-org/mlr#-machine-learning-in-r"><code>mlr</code></a> and they don’t claim to be the best search spaces either. So you might want to share your <em>ParConfig</em> which includes the search space as well as constant parameter settings for a certain <em>mlr learner</em> as it will help other people to improve their performances. Also this way you can share this <em>ParConfig</em> with colleagues and your future self.</p>
<p>At the same time you can benefit from the <a href="http://mlrhyperopt.jakob-r.de/status.php">online data base</a> if you want to use a new <em>mlr learner</em> for which you are not aware of tunable parameters.</p>
<div id="uploading-a-parameter-configuration" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#uploading-a-parameter-configuration" class="anchor"> </a></body></html>Uploading a Parameter Configuration</h3>
<p>To upload a Parameter Configuration that consists of a <em>ParamSet</em>, an associated <em>learner</em> (either given by the general <code>learner.name</code> or the concrete <code>learner</code>.) and optionally some specific parameter settings (<code>par.vals</code>). Using just the <code>learner.name</code> indicates that you might want to use this <em>ParConfig</em> for the regression as well as the classification version of this learner.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">par.set =<span class="st"> </span><span class="kw">makeParamSet</span>(
  <span class="kw">makeIntegerParam</span>(
    <span class="dt">id =</span> <span class="st">"mtry"</span>,
    <span class="dt">lower =</span> <span class="kw">expression</span>(<span class="kw">floor</span>(p^<span class="fl">0.25</span>)),
    <span class="dt">upper =</span> <span class="kw">expression</span>(<span class="kw">ceiling</span>(p^<span class="fl">0.75</span>)),
    <span class="dt">default =</span> <span class="kw">expression</span>(<span class="kw">round</span>(p^<span class="fl">0.5</span>))),
  <span class="dt">keys =</span> <span class="st">"p"</span>)
par.config =<span class="st"> </span><span class="kw"><a href="../reference/makeParConfig.html">makeParConfig</a></span>(
  <span class="dt">par.set =</span> par.set,
  <span class="dt">par.vals =</span> <span class="kw">list</span>(<span class="dt">ntree =</span> <span class="dv">200</span>),
  <span class="dt">learner.name =</span> <span class="st">"randomForest"</span>
)
id =<span class="st"> </span><span class="kw"><a href="../reference/uploadParConfig.html">uploadParConfig</a></span>(par.config, <span class="st">"jon.doe@example.com"</span>)
<span class="kw">print</span>(id)</code></pre></div>
<pre><code>## [1] "78"</code></pre>
<p>With this id you can later download this specific <em>ParConfig</em>.</p>
</div>
<div id="downloading-parameter-configurations" class="section level3">
<h3 class="hasAnchor">
<html><body><a href="#downloading-parameter-configurations" class="anchor"> </a></body></html>Downloading Parameter Configurations</h3>
<p>You can download a specific parameter configuration using the id:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="../reference/downloadParConfig.html">downloadParConfig</a></span>(id)</code></pre></div>
<pre><code>## $par.set
##         Type len          Def                           Constr Req Tunable
## mtry integer   - round(p^0.5) floor(p^0.25) to ceiling(p^0.75)   -    TRUE
##      Trafo
## mtry     -
## 
## $par.vals
## $par.vals$ntree
## [1] 200
## 
## 
## $associated.learner.class
## NULL
## 
## $associated.learner.type
## NULL
## 
## $associated.learner.name
## [1] "randomForest"
## 
## attr(,"class")
## [1] "ParConfig"</code></pre>
<p>At the moment it is not possible to survey the server for all available parameter configurations. At the moment you can simply call:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">all.configs =<span class="st"> </span><span class="kw"><a href="../reference/downloadParConfigs.html">downloadParConfigs</a></span>(<span class="dt">ids =</span> <span class="kw">as.character</span>(<span class="dv">1</span>:<span class="dv">1000</span>))</code></pre></div>
<p>If you looking for parameter configurations for your learner you can simply run:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">my.learner =<span class="st"> </span><span class="kw">makeLearner</span>(<span class="st">"classif.svm"</span>)
<span class="co"># only classif svm</span>
svm.configs =<span class="st"> </span><span class="kw">Filter</span>(function(x) <span class="kw"><a href="../reference/getParConfigLearnerClass.html">getParConfigLearnerClass</a></span>(x) ==<span class="st"> </span><span class="kw">getLearnerClass</span>(my.learner), all.configs)
<span class="co"># all svm</span>
svm.configs =<span class="st"> </span><span class="kw">Filter</span>(function(x) <span class="kw"><a href="../reference/getParConfigLearnerName.html">getParConfigLearnerName</a></span>(x) ==<span class="st"> </span><span class="kw">getLearnerName</span>(my.learner), all.configs)
<span class="co"># just show the ParSets</span>
<span class="kw">lapply</span>(svm.configs, getParConfigParSet)</code></pre></div>
<pre><code>## [[1]]
##            Type len Def            Constr Req Tunable Trafo
## cost    numeric   -   -           0 to 15   -    TRUE     -
## kernel discrete   -   - polynomial,radial   -    TRUE     -
## degree  integer   -   3          1 to Inf   Y    TRUE     -
## gamma   numeric   -   -           -5 to 5   -    TRUE     Y
## 
## [[2]]
##          Type len Def    Constr Req Tunable Trafo
## cost  numeric   -   - -15 to 15   -    TRUE     Y
## gamma numeric   -   - -15 to 15   -    TRUE     Y
## 
## [[3]]
##            Type len Def            Constr Req Tunable Trafo
## cost    numeric   -   -           0 to 15   -    TRUE     -
## degree  integer   -   3          1 to Inf   Y    TRUE     -
## gamma   numeric   -   -           -5 to 5   -    TRUE     Y
## kernel discrete   -   - polynomial,radial   -    TRUE     -
## 
## [[4]]
##            Type len Def            Constr Req Tunable Trafo
## cost    numeric   -   -           0 to 15   -    TRUE     -
## degree  integer   -   3          1 to Inf   Y    TRUE     -
## gamma   numeric   -   -           -5 to 5   -    TRUE     Y
## kernel discrete   -   - polynomial,radial   -    TRUE     -</code></pre>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#purpose">Purpose</a></li>
      <li><a href="#requirements">Requirements</a></li>
      <li><a href="#getting-started">Getting started</a></li>
      <li><a href="#sharing-search-spaces">Sharing Search Spaces</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Richter Jakob.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
